<html>
<head>
</head>
<body>
<script type="dojo/require">
    registry : "dijit/registry",
    mathRender : "MathRendering", 
    backend : "Backend", 
    configurationPane : "customPanes/configurationPane"
</script>
<div data-dojo-type="dijit/layout/BorderContainer"  design="headline" gutters="true" style="width: 100%; height: 100%;">
    <div data-dojo-type="dijit/layout/BorderContainer"  design="headline" gutters="true"  region="left"
		style="width: 30%; height: 100%;">
		<div data-dojo-type="dijit/layout/ContentPane" extractcontent="false" preventcache="false" preload="false" 
			refreshonshow="false"  splitter="false" maxsize="Infinity" dolayout="false" region="center">
                    <table data-dojo-id="runsGrid" data-dojo-type="dgrid.GridFromHtml" data-dojo-props="store: runsStore" style="height: 100%;">
                            <tr>
                                <th data-dgrid-column="{field:'id'}">Run</th>
                                <th data-dgrid-column="dgrid.editor({ field : 'selected', autoSave : true}, 'checkbox')">Selected</th>
                            </tr>
                        </table>
		</div>
        <div id="toolbar1" data-dojo-type="dijit/Toolbar" region="top">
            <div data-dojo-type="dijit/form/Button" id="select_all">
                Select all
                <script type="dojo/on" data-dojo-event="click" data-dojo-args="evt">
                    runsStore.query({selected : false}).forEach(function (run) {runsStore.put({id : run.id, selected : true}); });
                    registry.byId("runsGrid").refresh();
                </script>
            </div>
            <div data-dojo-type="dijit/form/Button" id="unselect_all">
                Deselect all
                <script type="dojo/on" data-dojo-event="click" data-dojo-args="evt">
                    runsStore.query({selected : true}).forEach(function (run) {runsStore.put({id : run.id, selected : false}); });
                    registry.byId("runsGrid").refresh();
                </script>
            </div>
          
            <div data-dojo-type="dijit/form/Button" id="run">
                Run
                <script type="dojo/on" data-dojo-event="click" data-dojo-args="evt">
                    var processing = function(output){
                        toastr.success('Output hypotheses are ready!');
                        mathRender.renderOutput("MathOutput",output["outputHypotheses"]);
                        registry.byId("tabs").selectChild(registry.byId("visualisationPane"));
                    };
                    backend.runExperiment(configurationPane.createMessage(), processing);
                </script>
            </div>
        </div>
	</div>
	<span data-dojo-type="dijit/layout/TabContainer" id="runTabs" tabstrip="false" persist="false"  region="center"
		controllerwidget="dijit.layout.TabController" style="width: 70%; height: 100%;" >
	</span>
</div>
</body>
</html>
